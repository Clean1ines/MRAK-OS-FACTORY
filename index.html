<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MRAK-OS | DYNAMIC</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="h-screen flex flex-col antialiased overflow-hidden">

    <nav class="h-14 border-b border-white/5 flex items-center justify-between px-6 bg-black/40 backdrop-blur-xl shrink-0">
        <div class="flex items-center gap-6">
            <div class="flex flex-col">
                <span class="text-[8px] tracking-[0.3em] text-emerald-500 font-bold uppercase">Prompt_Mode</span>
                <select id="mode-select" class="bg-transparent text-[10px] text-white font-mono outline-none cursor-pointer">
                    <option>Loading modes...</option>
                </select>
            </div>
            <div class="flex flex-col">
                <span class="text-[8px] tracking-[0.3em] text-zinc-500 font-bold uppercase">Neural_Model</span>
                <select id="model-select" class="bg-transparent text-[10px] text-white font-mono outline-none cursor-pointer">
                    <option>Loading models...</option>
                </select>
            </div>
        </div>
        <div class="flex gap-4 text-[9px] font-mono text-zinc-600">
            <span>TOKENS: <b id="q-tokens" class="text-zinc-400">---</b></span>
            <span>REQ: <b id="q-req" class="text-zinc-400">---</b></span>
        </div>
    </nav>

    <div class="px-6 py-2 bg-emerald-500/5 border-b border-white/5 text-[9px] text-zinc-500 flex justify-between">
        <span id="status-text">SYSTEM_READY</span>
        <span id="token-count">EST_COST: 0 TOKENS</span>
    </div>

    <!-- –ë–ª–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Ä–µ–∂–∏–º–æ–≤ -->
    <div class="px-6 py-2 bg-zinc-900 border-b border-white/5 flex flex-wrap items-center gap-4">
        <div class="flex items-center gap-2">
            <span class="text-xs text-zinc-400">–ü—Ä–æ–µ–∫—Ç:</span>
            <select id="project-select" class="bg-zinc-800 text-white text-sm px-3 py-1 rounded border border-white/10 w-64">
                <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç --</option>
            </select>
            <button id="new-project-btn" class="bg-emerald-600/20 text-emerald-500 text-xs px-3 py-1 rounded hover:bg-emerald-600/30">+ –ù–æ–≤—ã–π</button>
            <button id="delete-project-btn" class="bg-red-600/20 text-red-500 text-xs px-3 py-1 rounded hover:bg-red-600/30 ml-2 advanced-only">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
        </div>
        <div class="flex items-center gap-2 ml-auto">
            <span class="text-xs text-zinc-400">–†–µ–∂–∏–º:</span>
            <button id="simple-mode-btn" class="bg-emerald-600/20 text-emerald-500 text-xs px-3 py-1 rounded">–ü—Ä–æ—Å—Ç–æ–π</button>
            <button id="advanced-mode-btn" class="bg-zinc-700 text-white text-xs px-3 py-1 rounded">–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π</button>
        </div>
    </div>

    <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä (–∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Å–∫—Ä—ã—Ç, –ø–æ–∫–∞–∂–µ—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç–æ–º —Ä–µ–∂–∏–º–µ) -->
    <div id="progress-bar-container" class="px-6 py-2 hidden">
        <div class="progress-bar" id="progress-bar">
            <div class="progress-step" data-step="idea">üí° –ò–¥–µ—è</div>
            <div class="progress-step" data-step="requirements">üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è</div>
            <div class="progress-step" data-step="architecture">üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</div>
            <div class="progress-step" data-step="code">üíª –ö–æ–¥</div>
            <div class="progress-step" data-step="tests">‚úÖ –¢–µ—Å—Ç—ã</div>
        </div>
    </div>

    <!-- –ë–ª–æ–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º) -->
    <div id="advanced-controls" class="px-6 py-2 bg-zinc-900 border-b border-white/5 flex flex-wrap items-center gap-4 advanced-only">
        <div class="flex items-center gap-2">
            <span class="text-xs text-zinc-400">–¢–∏–ø:</span>
            <select id="artifact-type-select" class="bg-zinc-800 text-white text-sm px-3 py-1 rounded border border-white/10">
                <option value="BusinessIdea">–ë–∏–∑–Ω–µ—Å-–∏–¥–µ—è</option>
                <option value="ProductCouncilAnalysis">–ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–≥–æ —Å–æ–≤–µ—Ç–∞</option>
                <option value="BusinessRequirementPackage">–ü–∞–∫–µ—Ç –±–∏–∑–Ω–µ—Å-—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π</option>
                <option value="ReqEngineeringAnalysis">–ê–Ω–∞–ª–∏–∑ –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π</option>
                <option value="FunctionalRequirementPackage">–ü–∞–∫–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π</option>
                <option value="CodeArtifact">–ö–æ–¥</option>
            </select>
        </div>
        <div class="flex items-center gap-2">
            <span class="text-xs text-zinc-400">–†–æ–¥–∏—Ç–µ–ª—å:</span>
            <select id="parent-select" class="bg-zinc-800 text-white text-sm px-3 py-1 rounded border border-white/10 w-64">
                <option value="">-- –Ω–µ—Ç --</option>
            </select>
            <button id="refresh-parents" class="bg-zinc-700 text-white text-xs px-2 py-1 rounded">‚ü≤</button>
            <button id="delete-artifact-btn" class="bg-red-600/20 text-red-500 text-xs px-3 py-1 rounded hover:bg-red-600/30 ml-2 advanced-only">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π</button>
        </div>
        <button id="generate-artifact-btn" class="bg-emerald-600/20 text-emerald-500 text-xs px-3 py-1 rounded hover:bg-emerald-600/30" style="display:none;">–°–æ–∑–¥–∞—Ç—å/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
        <button id="save-artifact-btn" class="bg-emerald-600/20 text-emerald-500 text-xs px-3 py-1 rounded hover:bg-emerald-600/30">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∞—Ä—Ç–µ—Ñ–∞–∫—Ç</button>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ "–î–∞–ª–µ–µ" –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–µ–∂–∏–º–∞ -->
    <div id="simple-controls" class="px-6 py-2 bg-zinc-900 border-b border-white/5 hidden">
        <button id="next-btn" class="bg-emerald-600/20 text-emerald-500 text-xs px-4 py-2 rounded hover:bg-emerald-600/30">–î–∞–ª–µ–µ</button>
    </div>

    <main id="terminal" class="flex-1 overflow-y-auto px-6 scroll-smooth">
        <div id="messages" class="max-w-3xl mx-auto py-12 space-y-12"></div>
        <div id="scroll-anchor" class="h-32"></div>
    </main>

    <footer class="p-6 bg-gradient-to-t from-black to-transparent shrink-0">
        <div class="max-w-3xl mx-auto">
            <div class="flex items-end gap-3 bg-[#111113] border border-white/5 rounded-2xl p-3 transition-all duration-300 focus-within:border-emerald-500">
                <textarea id="input" class="w-full bg-transparent text-gray-200 py-2 px-3 outline-none resize-none h-[44px] max-h-[300px] text-sm" placeholder="–í–≤–µ–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å..."></textarea>
                <button id="send-btn" class="p-2 bg-emerald-600/10 text-emerald-500 rounded-xl hover:bg-emerald-600/20 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path d="M13 10V3L4 14h7v7l9-11h-7z" stroke-width="2"/></svg>
                </button>
            </div>
        </div>
    </footer>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏ -->
    <script src="api.js"></script>
    <script src="state.js"></script>
    <script src="ui.js"></script>
    <script src="main.js"></script>
</body>
</html>
